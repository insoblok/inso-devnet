{
  "annotations": { "list": [] },
  "editable": true,
  "fiscalYearStartMonth": 0,
  "graphTooltip": 1,
  "id": null,
  "links": [],
  "panels": [
    {
      "title": "── Sequencer Alerts ──",
      "type": "text",
      "gridPos": { "h": 2, "w": 24, "x": 0, "y": 0 },
      "options": { "content": "Critical health indicators for block production, RPC, and mempool", "mode": "markdown" }
    },
    {
      "title": "Block Production (5m)",
      "type": "stat",
      "gridPos": { "h": 4, "w": 6, "x": 0, "y": 2 },
      "targets": [{ "expr": "increase(inso_sequencer_block_height[5m])", "legendFormat": "Blocks/5m" }],
      "fieldConfig": { "defaults": { "thresholds": { "steps": [{ "color": "red", "value": null }, { "color": "yellow", "value": 1 }, { "color": "green", "value": 5 }] } } }
    },
    {
      "title": "RPC Error Rate (%)",
      "type": "gauge",
      "gridPos": { "h": 4, "w": 6, "x": 6, "y": 2 },
      "targets": [{ "expr": "rate(inso_sequencer_rpc_errors_total[5m]) / clamp_min(rate(inso_sequencer_rpc_requests_total[5m]), 0.001) * 100", "legendFormat": "Error %" }],
      "fieldConfig": { "defaults": { "unit": "percent", "min": 0, "max": 100, "decimals": 2, "thresholds": { "steps": [{ "color": "green", "value": null }, { "color": "yellow", "value": 2 }, { "color": "red", "value": 5 }] } } }
    },
    {
      "title": "Mempool Depth",
      "type": "stat",
      "gridPos": { "h": 4, "w": 6, "x": 12, "y": 2 },
      "targets": [{ "expr": "inso_sequencer_mempool_size", "legendFormat": "Depth" }],
      "fieldConfig": { "defaults": { "thresholds": { "steps": [{ "color": "green", "value": null }, { "color": "yellow", "value": 2000 }, { "color": "red", "value": 5000 }] } } }
    },
    {
      "title": "Block Time (ms)",
      "type": "stat",
      "gridPos": { "h": 4, "w": 6, "x": 18, "y": 2 },
      "targets": [{ "expr": "inso_sequencer_block_time_avg_ms", "legendFormat": "Avg ms" }],
      "fieldConfig": { "defaults": { "unit": "ms", "thresholds": { "steps": [{ "color": "green", "value": null }, { "color": "yellow", "value": 1000 }, { "color": "red", "value": 2000 }] } } }
    },
    {
      "title": "── Validator Alerts ──",
      "type": "text",
      "gridPos": { "h": 2, "w": 24, "x": 0, "y": 6 },
      "options": { "content": "Validator sync status, attestations, peers, and slashing", "mode": "markdown" }
    },
    {
      "title": "Sync Status",
      "type": "stat",
      "gridPos": { "h": 4, "w": 4, "x": 0, "y": 8 },
      "targets": [{ "expr": "inso_validator_is_synced", "legendFormat": "{{instance}}" }],
      "fieldConfig": { "defaults": { "mappings": [{ "type": "value", "options": { "0": { "text": "SYNCING", "color": "red" }, "1": { "text": "SYNCED", "color": "green" } } }] } }
    },
    {
      "title": "Block Lag",
      "type": "stat",
      "gridPos": { "h": 4, "w": 4, "x": 4, "y": 8 },
      "targets": [{ "expr": "inso_sequencer_block_height - inso_validator_synced_block", "legendFormat": "{{instance}}" }],
      "fieldConfig": { "defaults": { "thresholds": { "steps": [{ "color": "green", "value": null }, { "color": "yellow", "value": 5 }, { "color": "red", "value": 10 }] } } }
    },
    {
      "title": "Attestation Failures",
      "type": "stat",
      "gridPos": { "h": 4, "w": 4, "x": 8, "y": 8 },
      "targets": [{ "expr": "rate(inso_validator_attestations_failed_total[5m])", "legendFormat": "{{instance}}" }],
      "fieldConfig": { "defaults": { "unit": "ops", "decimals": 2, "thresholds": { "steps": [{ "color": "green", "value": null }, { "color": "yellow", "value": 0.1 }, { "color": "red", "value": 0.5 }] } } }
    },
    {
      "title": "Peer Count",
      "type": "stat",
      "gridPos": { "h": 4, "w": 4, "x": 12, "y": 8 },
      "targets": [{ "expr": "inso_validator_peer_count", "legendFormat": "{{instance}}" }],
      "fieldConfig": { "defaults": { "thresholds": { "steps": [{ "color": "red", "value": null }, { "color": "yellow", "value": 1 }, { "color": "green", "value": 2 }] } } }
    },
    {
      "title": "Slashes Received",
      "type": "stat",
      "gridPos": { "h": 4, "w": 4, "x": 16, "y": 8 },
      "targets": [{ "expr": "inso_validator_slashes_received_total", "legendFormat": "{{instance}}" }],
      "fieldConfig": { "defaults": { "thresholds": { "steps": [{ "color": "green", "value": null }, { "color": "red", "value": 1 }] } } }
    },
    {
      "title": "Sovereignty Tier",
      "type": "stat",
      "gridPos": { "h": 4, "w": 4, "x": 20, "y": 8 },
      "targets": [{ "expr": "inso_validator_sovereignty_tier", "legendFormat": "{{instance}}" }],
      "fieldConfig": { "defaults": { "mappings": [{ "type": "value", "options": { "0": { "text": "None" }, "1": { "text": "Bronze" }, "2": { "text": "Silver" }, "3": { "text": "Gold" }, "4": { "text": "Platinum" } } }], "thresholds": { "steps": [{ "color": "gray", "value": null }, { "color": "#cd7f32", "value": 1 }, { "color": "silver", "value": 2 }, { "color": "#ffd700", "value": 3 }, { "color": "#e5e4e2", "value": 4 }] } } }
    },
    {
      "title": "── Phase 5 Health ──",
      "type": "text",
      "gridPos": { "h": 2, "w": 24, "x": 0, "y": 12 },
      "options": { "content": "Phase 5 subsystem health: compliance, DA, ordering, AI oracle", "mode": "markdown" }
    },
    {
      "title": "Compliance Flag Rate",
      "type": "gauge",
      "gridPos": { "h": 5, "w": 6, "x": 0, "y": 14 },
      "targets": [{ "expr": "inso_compliance_flagged_total / clamp_min(inso_compliance_screens_total, 1) * 100", "legendFormat": "Flag %" }],
      "fieldConfig": { "defaults": { "unit": "percent", "min": 0, "max": 100, "decimals": 2, "thresholds": { "steps": [{ "color": "green", "value": null }, { "color": "yellow", "value": 5 }, { "color": "red", "value": 10 }] } } }
    },
    {
      "title": "DA Publish Rate",
      "type": "stat",
      "gridPos": { "h": 5, "w": 6, "x": 6, "y": 14 },
      "targets": [{ "expr": "rate(inso_da_blobs_published_total[5m])", "legendFormat": "Blobs/s" }],
      "fieldConfig": { "defaults": { "unit": "ops", "decimals": 3, "thresholds": { "steps": [{ "color": "red", "value": null }, { "color": "green", "value": 0.001 }] } } }
    },
    {
      "title": "Ordering Proof Backlog",
      "type": "stat",
      "gridPos": { "h": 5, "w": 6, "x": 12, "y": 14 },
      "targets": [{ "expr": "inso_ordering_proofs_generated_total - inso_ordering_proofs_verified_total", "legendFormat": "Unverified" }],
      "fieldConfig": { "defaults": { "thresholds": { "steps": [{ "color": "green", "value": null }, { "color": "yellow", "value": 20 }, { "color": "red", "value": 50 }] } } }
    },
    {
      "title": "TasteScore Lookups/s",
      "type": "stat",
      "gridPos": { "h": 5, "w": 6, "x": 18, "y": 14 },
      "targets": [{ "expr": "rate(inso_tastescore_lookups_total[5m])", "legendFormat": "Lookups/s" }],
      "fieldConfig": { "defaults": { "unit": "ops", "decimals": 3, "thresholds": { "steps": [{ "color": "red", "value": null }, { "color": "green", "value": 0.001 }] } } }
    }
  ],
  "refresh": "10s",
  "schemaVersion": 39,
  "tags": ["insoblok", "l2", "alerts", "health"],
  "templating": { "list": [] },
  "time": { "from": "now-1h", "to": "now" },
  "timepicker": {},
  "timezone": "browser",
  "title": "InSoBlok Alerts & Health",
  "uid": "insoblok-alerts",
  "version": 1
}
